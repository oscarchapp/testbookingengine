{% extends "main.html" %}

{% block content %}
<h1>Habitaciones del hotel</h1>

<form id="filter-form" class="mb-4">
    <input
        type="text"
        name="search"
        id="search-input"
        placeholder="Buscar habitaciÃ³n por nombre..."
        value="{{ request.GET.search }}"
        class="form-control"
    />
    <button type="submit" class="btn btn-primary mt-2">Buscar</button>
</form>

<div id="rooms-list">
    {% include 'partials/room_list.html' %}
</div>

<script>
    document.getElementById('filter-form').addEventListener('submit', function (e) {
        e.preventDefault();
        const query = document.getElementById('search-input').value;

        fetch(`?search=${encodeURIComponent(query)}`, {
            headers: {
                'X-Requested-With': 'XMLHttpRequest'
            }
        })
        .then(response => response.text())
        .then(html => {
            document.getElementById('rooms-list').innerHTML = html;
        })
        .catch(error => console.error('Error:', error));
    });
</script>
{% endblock %}
